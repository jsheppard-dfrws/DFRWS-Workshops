<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.css"
          type="text/css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/railscasts.min.css"
          rel="stylesheet"/>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/jquery.address/1.6/jquery.address.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/java.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/kotlin.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <style>
      

body {
  font-family: "Open Sans", "Helvetica", "Helvetica Neue",  "Arial", sans-serif;
  font-size:90%;
  color: black;
}

p {
  margin: 0.5em;
}

pre code {
  font-family: "Monaco";
  font-size: 100%;
}

img {
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  margin:10px;
}

h1, h2, h3 {
  border-bottom:thin solid black;
  margin-bottom: 0.5em;
  margin-top: 1em;
}

h1 {
  font-style:italic;
  font-size:130%;
}

h2 {
  font-size:110%;
}

h3 {
  font-size:100%;
}



      

html, body {
  height: 100%;
  margin: 0;
}
.wrapper {
  height: 100%;
  display: flex;
  flex-direction: column;
}
.footer {
  background: white;
  text-align: right;
}
.content {
  flex: 1;
  overflow: auto;
}



    </style>
  </head>

  
  

  <div class="ui fixed top pointing inverted stackable menu labmenu">
    <header class="header item">
      <i id="toc" class="sitemap icon"></i>
      
        <a href="../index.html">  Malware Reverse Engineering  </a>
      
    </header>
    <div class="right tab-menu menu">
      
        <a class="item" data-tab="Reverse Engineering Malware">
          Reverse Engineering Malware
        </a>
      
        <a class="item" data-tab="Introduction">
          Introduction
        </a>
      
        <a class="item" data-tab="Quick Guide">
          Quick Guide
        </a>
      
        <a class="item" data-tab="Downloads">
          Downloads
        </a>
      
        <a class="item" data-tab="Win7 Configuration">
          Win7 Configuration
        </a>
      
        <a class="item" data-tab="REMnux Conifuguration">
          REMnux Conifuguration
        </a>
      
        <a class="item" data-tab="Virtual Network">
          Virtual Network
        </a>
      
        <a class="item" data-tab="NB Snapshot">
          NB Snapshot
        </a>
      
    </div>
  </div>


  

  <div class="ui pushable">
    <div class="ui inverted labeled icon left inline vertical sidebar menu">
      <br><br>
      
        
          
            <a class="item"
               href="https://jsheppard-dfrws.github.io/DFRWS-Workshops/index.html//topic-01-Reverse-Engineering-Malware/book-a/index.html">Reverse Engineering Malware </a>
          
        
      
    </div>
    <div class="pusher" tabindex="-1">
      <div class="ui basic segment">
        <br>
        
          <div class="ui tab segment lab" data-tab="Reverse Engineering Malware">
            <h1>Analysis Platform - Creation</h1>
<p>Necessary Preparation for Malware and Reverse Engineering Workshop </p>

          </div>
        
          <div class="ui tab segment lab" data-tab="Introduction">
            <h1>Introduction and Caution</h1>
<p>In order to get the most out of the workshop and actively participate,
you will have to bring your own computer preinstalled with a safe
analysis environment.</p>
<p>How to create your analysis platform is described in this presentation.</p>
<p>This is a customized setup for this workshop, using older versions of
some software for demonstration purposes.</p>
<p>NB! This workshop will examine and execute a live malware sample. </p>

          </div>
        
          <div class="ui tab segment lab" data-tab="Quick Guide">
            <h1>Quick Guide</h1>
<ol>
<li><p>Install VMware or VirtualBox</p>
</li>
<li><p>Download a win7 virtual machine (.ovf) from: <a href="https://filesender.uninett.no/?s=download&amp;token=8a9af686-7267-4988-9ef7-b50f6d00f387"><a href="https://filesender.uninett.no/?s=download&amp;token=8a9af686-7267-4988-9ef7-b50f6d00f387">https://filesender.uninett.no/?s=download&amp;token=8a9af686-7267-4988-9ef7-b50f6d00f387</a></a></p>
</li>
<li><p>Download REMnux virtual machine (.ova) from: <a href="https://remnux.org/"><a href="https://remnux.org/">https://remnux.org/</a></a></p>
</li>
<li><p>Install and configure win7 virtual machine</p>
</li>
<li><p>Open .ovf in VMware or VirtualBox (only one)</p>
</li>
<li><p>Download and install IDA Freeware Version 5.0 on win7 machine from:
<a href="https://www.scummvm.org/news/20180331/"><a href="https://www.scummvm.org/news/20180331/">https://www.scummvm.org/news/20180331/</a></a></p>
</li>
<li><p>Disconnect from Internet</p>
</li>
<li><p>Install and configure REMnux virtual machine</p>
</li>
<li><p>Open .ova in VMware or VirtualBox</p>
</li>
<li><p>Run update-remnux full</p>
</li>
<li><p>Disconnect from Internet</p>
</li>
<li><p>Connect both machines to the same virtual network and check (ping)</p>
</li>
<li><p>Take a snapshot (DFRWS_start) on both machines</p>
</li>
<li><p>Enjoy the workshop J</p>
</li>
</ol>
<p>Detailed instructions on each step is provided next.</p>
<p>In case of any problems, please contact sergii.banin@ntnu.no</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="Downloads">
            <h1>Downloads</h1>
<ol>
<li><p>Install VMware or VirtualBox
We will use VMware (60 day trial license available), but VirtualBox will
work as well.</p>
</li>
<li><p>Download a win7 virtual machine (.ovf)
3 files (DFRWS2019.mf, .ofv and .vmdk) can be downloaded from:
<a href="https://filesender.uninett.no/?s=download&amp;token=8a9af686-7267-4988-9ef7-b50f6d00f387"><a href="https://filesender.uninett.no/?s=download&amp;token=8a9af686-7267-4988-9ef7-b50f6d00f387">https://filesender.uninett.no/?s=download&amp;token=8a9af686-7267-4988-9ef7-b50f6d00f387</a></a>
This is a win7 machine preinstalled with malware and tools for the purpose of the tutorial in this workshop</p>
</li>
<li><p>Download REMnux virtual machine (.ova)
remnux-6.0-ova-public.ova can be downloaded from: <a href="https://remnux.org/"><a href="https://remnux.org/">https://remnux.org/</a></a>
This is a freely-available malware reversing and analysis utilities maintained by Lenny Zeltser and Davis Westcott </p>
</li>
</ol>

          </div>
        
          <div class="ui tab segment lab" data-tab="Win7 Configuration">
            <h1>4 Win7 Configuration</h1>
<p>Install and configure win7 virtual machine</p>
<h2>VMware</h2>
<p>4.1. Open DFRWS2019.ovf in VMware</p>
<ul>
<li><p>Start VMWare</p>
</li>
<li><p>File-Open – choose DFRWS2019.ovf</p>
</li>
<li><p>Type in DFRWS2019 as a name and change storage path if needed.</p>
</li>
<li><p>Press Import (may take a some time)</p>
</li>
<li><p>Optional (if limited storage): Take a base Snapshot: VM- Take Snapshot, type in name DFRWS2019_BASE</p>
</li>
<li><p>Power on the win7 virtual machine</p>
</li>
<li><p>Close the Windows activation window.</p>
</li>
<li><p>Click Restart now, if a windows with restart request pops up.</p>
</li>
<li><p>Close the Windows activation window if needed.</p>
</li>
<li><p>Right Click on the machines name (DFRWS2019) or click on VM menu</p>
</li>
<li><p>Choose Settings-Hardware-Network Adapter.</p>
</li>
<li><p>Make sure NAT is selected and tick on the “Connected” and “Connected at power on”. Click Ok.</p>
</li>
<li><p>Now you should be connected to the Internet, needed to download IDA Pro free</p>
</li>
</ul>
<p>4.2. Download and install IDA Freeware version 5.0 on win7 machine</p>
<ul>
<li><p>From inside the win7 machine, go to: <a href="https://www.scummvm.org/news/20180331/">https://www.scummvm.org/news/20180331/</a></p>
</li>
<li><p>Download IDA Freeware Version 5.0</p>
</li>
<li><p>When download is finished – install it. (create desktop icon, but don’t
launch it yet)</p>
</li>
</ul>
<p>4.3 Disconnect from Internet</p>
<ul>
<li><p>Right Click on the machines name (DFRWS2019) or click on VM menu</p>
</li>
<li><p>Choose Settings-Hardware-Network Adapter.</p>
</li>
<li><p>Tick off the Connected and Connected at power on.</p>
</li>
<li><p>Click Ok.</p>
</li>
</ul>
<p>Optional! Take a snapshot. Name it DFRWS2019_IDA</p>
<h2>Virtual Box</h2>
<p>4.1. Open .ovf in VirtualBox</p>
<ul>
<li><p>Open VirtualBox</p>
</li>
<li><p>File – Import Appliance. Open the Win7 .OVF file provided..</p>
</li>
<li><p>RightClick on the VM, select Display, Give 128MB of Video memory to this VM. Hit Ok.</p>
</li>
<li><p>Create Snapshot. Start the VM. Right click on the Desktop. Choose higher resolution (at least 1024x768, 
the more – the better). Power off the machine. Take another snapshot.</p>
</li>
</ul>
<p>4.2. Download and install IDA Pro free 5.0 on win7 machine 4.3. Disconnect from Internet</p>
<ul>
<li>RightclickontheVMname–Settings–Network.Uncheckthe Enable Network Adapter checkbox.</li>
</ul>

          </div>
        
          <div class="ui tab segment lab" data-tab="REMnux Conifuguration">
            <h1>5 REMnux Conifguration</h1>
<p>Install and configure REMnux virtual machine</p>
<h2>VMWare</h2>
<p>5.1. Open .ova in Vmware</p>
<ul>
<li><p>Start VMWare or go out of the win7 machine (DFRSW2019)</p>
</li>
<li><p>File-Open – choose remnux-6.0-ova-public.ova</p>
</li>
<li><p>Type in REMnux_DFRWS2019 as a name and change storage path if needed.</p>
</li>
<li><p>Press Import (may take a some time)</p>
</li>
<li><p>Optional (if limited storage): Take a base Snapshot: VM- Take Snapshot, type
in name DFRWS2019_BASE</p>
</li>
<li><p>Power on the machine</p>
</li>
</ul>
<p>5.2. Run update-remnux full (may take some time)</p>
<ul>
<li>Sudo reboot when finished</li>
</ul>
<p>5.3. Disconnect from Internet</p>
<ul>
<li><p>Right Click on the machines name (DFRWS2019) or click on VM menu</p>
</li>
<li><p>Choose Settings-Hardware-Network Adapter.</p>
</li>
<li><p>Tick off the Connected and Connected at power on.</p>
</li>
<li><p>Click Ok.</p>
</li>
</ul>
<p>Optional! Take a snapshot. Name it DFRWS2019_update</p>
<h2>VirtualBox</h2>
<p>5.1. Open .ova in VirtualBox</p>
<ul>
<li><p>Open VirtualBox</p>
</li>
<li><p>File – Import Appliance. Open the .OVA file provided..</p>
</li>
<li><p>RightClick on the VM, select Display, Give 128MB of Video memory to this VM. Hit Ok.</p>
</li>
</ul>
<p>5.2. Run update-remnux full</p>
<ul>
<li><p>Type update-remnux full in the terminal and hit enter. Update
process may take some time.</p>
</li>
<li><p>Sudo reboot when finished</p>
</li>
</ul>
<p>5.3. Disconnect from Internet</p>
<ul>
<li>RightclickontheVMname–Settings–Network.Uncheckthe Enable Network Adapter checkbox. </li>
</ul>
<p>Optional! Take a snapshot. Name it DFRWS2019_IDA</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="Virtual Network">
            <h1>6 Virtual Network</h1>
<p>Connect both machines to the same virtual network</p>
<h2>VMWare</h2>
<ul>
<li><p>Create Virtual Network</p>
</li>
<li><p>Goto Edit – Virtual Network Editor.</p>
</li>
<li><p>Click on Change Settings and click Yes.</p>
</li>
<li><p>Click Add Network. Select e.g. VMnet2. Click Ok.</p>
</li>
<li><p>Config:</p>
</li>
</ul>
<p>Make sure the network is selected (e.g. VMnet2) and choose the following:</p>
<ul>
<li><p>VMnet information: Select Host-Only.</p>
</li>
<li><p>Deselect “Connect a host virtual adapter...”</p>
</li>
<li><p>Select: “Use local DHCP services...”,</p>
</li>
<li><p>Subnet IP: 192.168.xxx.0 (write this down, xxx can be anything)</p>
</li>
<li><p>subnet mask 255.255.255.0.</p>
</li>
<li><p>Click Apply and Ok.</p>
</li>
<li><p>Connect: For both Win7 and Remnux machines connect to this network.</p>
</li>
<li><p>Go to VM-Settings-Hardware-Network Adapter.</p>
</li>
<li><p>Network Connection, select Custom and the Network you created (e.g. VMnet2)</p>
</li>
<li><p>Choose Connected and Connected at power on.</p>
</li>
<li><p>Click Ok. (NB! repeat for both machines)</p>
</li>
</ul>
<h2>VirtualBox</h2>
<ul>
<li><p>Create your own host-based network (File – Host Network Manager). Enable DHCP, use 255.255.255.0 mask for simplicity. Remember the IPv4 address of adapter.</p>
</li>
<li><p>Connect your Windows and Remnux machines to this network.</p>
</li>
<li><p>Right Click on the VM – Settings – Network. Choose Attached to: select the name of the host-based network you just created.</p>
</li>
</ul>
<h2>Check (ping) Check IP address</h2>
<ul>
<li><p>Win7:</p>
</li>
<li><p>Go to Start menu. Type cmd, hit enter.</p>
</li>
<li><p>Type ipconfig and hit enter.</p>
</li>
<li><p>IP address should be 192.168.xxx.zzz</p>
</li>
<li><p>xxx is same as Subnet IP used in Network editor from previous page</p>
</li>
<li><p>zzz can be anything</p>
</li>
<li><p>REMnux</p>
</li>
<li><p>Type ipconfig (or ifconfig)</p>
</li>
<li><p>IP address should be 192.168.xxx.yyy</p>
</li>
<li><p>xxx is same as Subnet IP used in Network editor from previous page</p>
</li>
<li><p>yyy can be anything but is often is zzz+/- 1.</p>
</li>
<li><p>If incorrect or missing, try to run renew-dhcp command</p>
</li>
</ul>
<p>Check connection</p>
<ul>
<li><p>Win7: Ping 192.168.xxx.yyy</p>
</li>
<li><p>REMnux: Ping 192.168.xxx.zzz (ctrl c to stop)</p>
</li>
</ul>
<h2>Network configuration</h2>
<p>On Win7 machine:</p>
<ul>
<li><p>Goto: Control Panel</p>
</li>
<li><p>Choose: Network and Internet - Network and Sharing Center – Change Adapter Settings</p>
</li>
<li><p>Right click on Local Area Connection (should be only one)</p>
</li>
<li><p>Choose: Properties</p>
</li>
<li><p>Mark IPv4, choose Properties</p>
</li>
<li><p>Set the following manually:</p>
</li>
</ul>
<p>Select: Use the following IP address</p>
<ul>
<li><p>IP address: 192.168.xxx.zzz (IP address of Win7 machine) </p>
</li>
<li><p>Subnet Mask: 255.255.255.0</p>
</li>
<li><p>Default gateway: 192.168.xxx.yyy (ip address of REMnux machine)</p>
</li>
</ul>
<p>Select: Use the following DNS server address</p>
<ul>
<li><p>Preferred DNS server: 192.168.xxx.yyy (ip address of REMnux machine)</p>
</li>
<li><p>Ok - close</p>
</li>
<li><p>Choose Public Network in the pop up menu.</p>
</li>
</ul>

          </div>
        
          <div class="ui tab segment lab" data-tab="NB Snapshot">
            <h1>7 NB Snapshots</h1>
<p>Take a snapshot (DFRWS_start) on both machines</p>
<p>NB! Not optional</p>
<h2>VMWare</h2>
<ul>
<li>On win7: Close the cmd terminal unless already done</li>
<li>Right Click on the machines name (DFRWS2019) or click on VM menu</li>
<li>Choose Snapshot – Take Snapshot</li>
<li>Name it DFRWS2019_start</li>
<li>NB! repeat for both win7 and REMnux</li>
</ul>
<h2>Virtual Box</h2>
<ul>
<li>SelectVM.ClickonthedownarrownexttoaMachineToolsbutton. •  ChooseSnapshots.</li>
<li>PressTakebutton.</li>
<li>NameitDFRWS2019_start</li>
</ul>
<p>Enjoy the Workshop</p>
<p>You should now have a clean image of both win7 and REMnux virtual machines called DFRWS_start as a necessary starting point for the workshopJ</p>
<p>Welcome!</p>

          </div>
        
      </div>
    </div>
  </div>


  <br>
  <script>
    $(document).on('keydown', function(e) {
  e = e || window.event;
  var nextTab;
  switch (e.which || e.keyCode) {
    case 37: // left
      nextTab = $('.tab-menu a[data-tab].active').prev('a[data-tab]');
      if (!nextTab.length) nextTab = $('.tab-menu a[data-tab]').last();
      nextTab.click();
      $('.pusher').focus();
      break;

    case 39: // right
      nextTab = $('.tab-menu a[data-tab].active').next('a[data-tab]');
      if (!nextTab.length) nextTab = $('.tab-menu a[data-tab]').first();
      nextTab.click();
      $('.pusher').focus();
      break;
  }
});

    $(document).ready(function() {
  $('img').addClass('ui image');

  $('.ui.embed').embed();

  const $images = $('.lab img');
  jQuery.each($images, function(i) {
    if ($images[i].alt.length > 0) {
      const divImg = $(document.createElement('div')).addClass(
        'ui basic segment',
      );
      $($images[i]).wrap(divImg);
      const divLabel = $(document.createElement('div')).addClass(
        'ui blue ribbon label',
      );
      divLabel.append($images[i].alt);
      $(divLabel).insertBefore($images[i]);
    }
  });

  $('.ui.menu .item').tab({
    history: true,
    historyType: 'hash',
  });

  $('.popup').popup();

  $('.ui.sidebar')
    .sidebar({ context: $('.pushable') })
    .sidebar('setting', 'transition', 'slide out')
    .sidebar('attach events', '#toc');
});

  </script>



  <div class="ui bottom fixed borderless right menu">
    <div class="ui right small menu">
      <div class="ui tiny basic message segment">
         Powered by <a href="https://github.com/edeleastar/tutors-ts">tutors-ts.</a> 
      </div>
    </div>
  </div>

  </body>

</html>